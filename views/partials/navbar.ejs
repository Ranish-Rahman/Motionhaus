<!-- Navigation Bar -->
<nav class="motion-navbar">
    <div class="motion-nav-container">
        <!-- Brand Logo -->
        <div class="motion-brand">
            <a href="/home" class="motion-brand-link">MotionHaus</a>
        </div>

        <!-- Left Side Navigation -->
        <ul class="motion-nav-list motion-left">
            <li class="motion-nav-item"><a href="/products">SHOP</a></li>
            <li class="motion-nav-item"><a href="/home">HOME</a></li>
            <li class="motion-nav-item"><a href="/about">ABOUT</a></li>
            <li class="motion-nav-item"><a href="/orders">ORDERS</a></li>
        </ul>

        <!-- Right Side Navigation -->
        <ul class="motion-nav-list motion-right">
            <li class="motion-nav-item motion-icon-item">
                <div class="motion-profile-dropdown">
                    <a href="javascript:void(0)" class="motion-icon-link" id="profileDropdownToggle">
                        <i class="fas fa-user"></i>
                    </a>
                    <div class="motion-dropdown-content" id="profileDropdown">
                        <a href="/profile">Profile</a>
                        <a href="javascript:void(0)" id="logoutLink">Logout</a>
                    </div>
                </div>
            </li>
            <li class="motion-nav-item motion-icon-item">
                <a href="/wishlist" class="motion-icon-link">
                    <i class="fas fa-heart"></i>
                    <% if (locals.wishlistCount && locals.wishlistCount > 0) { %>
                        <span class="motion-count-badge"><%= locals.wishlistCount %></span>
                    <% } %>
                </a>
            </li>
            <li class="motion-nav-item motion-icon-item">
                <a href="/cart" class="motion-icon-link">
                    <i class="fas fa-shopping-bag"></i>
                    <% if (locals.cartCount && locals.cartCount > 0) { %>
                        <span class="motion-count-badge"><%= locals.cartCount %></span>
                    <% } %>
                </a>
            </li>
        </ul>
    </div>
</nav>

<style>
.motion-navbar {
    background: white !important;
    border-bottom: 1px solid rgba(0,0,0,0.08) !important;
    padding: 12px 0 !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1000 !important;
    font-family: 'Inter', sans-serif !important;
}

.motion-navbar .motion-nav-container {
    max-width: 1400px !important;
    margin: 0 auto !important;
    padding: 0 20px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    gap: 32px !important;
}

.motion-navbar .motion-brand {
    flex-shrink: 0 !important;
}

.motion-navbar .motion-brand-link {
    color: #000 !important;
    text-decoration: none !important;
    font-size: 20px !important;
    font-weight: 500 !important;
    letter-spacing: 0.5px !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
}

.motion-navbar .motion-brand-link:hover {
    opacity: 0.7 !important;
    text-decoration: none !important;
}

.motion-navbar .motion-nav-list {
    list-style: none !important;
    margin: 0 !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center !important;
    gap: 32px !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
}
.motion-navbar .motion-nav-list .motion-nav-item:not(:last-child) {
    margin-right: 32px !important;
}

.motion-navbar .motion-left {
    margin-left: 48px !important;
}

.motion-navbar .motion-nav-item {
    font-size: 11px !important;
    letter-spacing: 0.5px !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
}

.motion-navbar .motion-nav-list .motion-nav-item a {
    color: #000 !important;
    text-decoration: none !important;
    font-size: 11px !important;
    font-weight: 500 !important;
    letter-spacing: 0.5px !important;
    background: none !important;
    padding: 0 !important;
    border: none !important;
    box-shadow: none !important;
    transition: opacity 0.2s !important;
    line-height: 1.2 !important;
    display: inline;
}
.motion-navbar .motion-nav-list .motion-nav-item a:hover {
    opacity: 0.7 !important;
    text-decoration: none !important;
}

/* Icon styles */
.motion-navbar .motion-icon-item {
    position: relative !important;
}

.motion-navbar .motion-icon-link {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 24px !important;
    height: 24px !important;
    text-decoration: none !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
}

.motion-navbar .motion-icon-link i {
    font-size: 16px !important;
}

.motion-navbar .motion-count-badge {
    position: absolute !important;
    top: -8px !important;
    right: -8px !important;
    background: #000 !important;
    color: #fff !important;
    width: 16px !important;
    height: 16px !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 10px !important;
}

/* Profile Dropdown Styles */
.motion-navbar .motion-profile-dropdown {
    position: relative !important;
    display: inline-block !important;
}

.motion-navbar .motion-dropdown-content {
    display: none !important;
    position: absolute !important;
    right: 0 !important;
    background-color: white !important;
    min-width: 160px !important;
    box-shadow: 0 8px 16px rgba(0,0,0,0.1) !important;
    z-index: 1001 !important;
    border-radius: 4px !important;
    margin-top: 8px !important;
}

.motion-navbar .motion-dropdown-content a {
    color: #000 !important;
    padding: 12px 16px !important;
    text-decoration: none !important;
    display: block !important;
    font-size: 14px !important;
    transition: background-color 0.2s !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
}

.motion-navbar .motion-dropdown-content a:hover {
    background-color: #f5f5f5 !important;
    text-decoration: none !important;
}

.motion-navbar .motion-dropdown-content.show {
    display: block !important;
}

@media (max-width: 991.98px) {
    .motion-navbar .motion-nav-list {
        gap: 20px !important;
    }
    .motion-navbar .motion-left {
        margin-left: 24px !important;
    }
}

@media (max-width: 768px) {
    .motion-navbar .motion-nav-container {
        flex-wrap: wrap !important;
        gap: 15px !important;
    }
    .motion-navbar .motion-nav-list {
        gap: 15px !important;
    }
    .motion-navbar .motion-left {
        margin-left: 0 !important;
        order: 2 !important;
        width: 100% !important;
        justify-content: center !important;
    }
    .motion-navbar .motion-right {
        order: 1 !important;
    }
}
</style>

<!-- Search Modal -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-body">
                <form action="/search" method="GET">
                    <div class="input-group">
                        <input type="search" class="form-control" name="q" placeholder="Search products..." aria-label="Search">
                        <button class="btn btn-outline-dark" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const dropdownToggle = document.getElementById('profileDropdownToggle');
    const dropdown = document.getElementById('profileDropdown');

    // Toggle dropdown on click
    dropdownToggle.addEventListener('click', function(e) {
        e.preventDefault();
        dropdown.classList.toggle('show');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!dropdownToggle.contains(e.target) && !dropdown.contains(e.target)) {
            dropdown.classList.remove('show');
        }
    });

    // Handle logout
    document.getElementById('logoutLink')?.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include'
        })
        .then(response => {
            if (response.ok) {
                // Clear any client-side storage
                localStorage.clear();
                sessionStorage.clear();
                
                // Force a hard redirect to login page
                window.location.replace('/login');
            }
        })
        .catch(error => {
            console.error('Logout error:', error);
        });
    });
});
</script> 