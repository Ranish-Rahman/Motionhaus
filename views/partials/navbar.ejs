<!-- Navigation Bar -->
<nav class="navbar">
    <div class="nav-container">
        <!-- Brand Logo -->
        <div class="brand">
            <a href="/" class="brand-link">MotionHaus</a>
        </div>

        <!-- Left Side Navigation -->
        <ul class="nav-list left">
            <li class="nav-item"><a href="/products">SHOP</a></li>
            <li class="nav-item"><a href="/">HOME</a></li>
            <li class="nav-item"><a href="/about">ABOUT</a></li>
            <li class="nav-item"><a href="/orders">ORDERS</a></li>
        </ul>

        <!-- Right Side Navigation -->
        <ul class="nav-list right">
            <li class="nav-item icon-item">
                <div class="profile-dropdown">
                    <a href="javascript:void(0)" class="icon-link" id="profileDropdownToggle">
                        <i class="fas fa-user"></i>
                    </a>
                    <div class="dropdown-content" id="profileDropdown">
                        <a href="/profile">Profile</a>
                        <a href="javascript:void(0)" id="logoutLink">Logout</a>
                    </div>
                </div>
            </li>
            <li class="nav-item icon-item">
                <a href="/wishlist" class="icon-link">
                    <i class="fas fa-heart"></i>
                    <% if (locals.wishlistCount && locals.wishlistCount > 0) { %>
                        <span class="count-badge"><%= locals.wishlistCount %></span>
                    <% } %>
                </a>
            </li>
            <li class="nav-item icon-item">
                <a href="/cart" class="icon-link">
                    <i class="fas fa-shopping-bag"></i>
                    <% if (locals.cartCount && locals.cartCount > 0) { %>
                        <span class="count-badge"><%= locals.cartCount %></span>
                    <% } %>
                </a>
            </li>
        </ul>
    </div>
</nav>

<style>
.navbar {
    background: white;
    border-bottom: 1px solid rgba(0,0,0,0.08);
    padding: 12px 0;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
}

.nav-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 32px;
}

.brand {
    flex-shrink: 0;
}

.brand-link {
    color: #000;
    text-decoration: none;
    font-size: 20px;
    font-weight: 500;
    letter-spacing: 0.5px;
}

.brand-link:hover {
    opacity: 0.7;
}

.nav-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    align-items: center;
    gap: 32px;
}

.nav-list.left {
    margin-left: 48px;
}

.nav-item {
    font-size: 11px;
    letter-spacing: 0.5px;
}

.nav-item a {
    color: #000;
    text-decoration: none;
    transition: opacity 0.2s;
}

.nav-item a:hover {
    opacity: 0.7;
}

/* Icon styles */
.icon-item {
    position: relative;
}

.icon-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
}

.icon-link i {
    font-size: 16px;
}

.count-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #000;
    color: #fff;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
}

@media (max-width: 991.98px) {
    .nav-list {
        gap: 20px;
    }

    .nav-list.left {
        margin-left: 24px;
    }
}

@media (max-width: 768px) {
    .nav-container {
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .nav-list {
        gap: 15px;
    }

    .nav-list.left {
        margin-left: 0;
        order: 2;
        width: 100%;
        justify-content: center;
    }

    .nav-list.right {
        order: 1;
    }
}

/* Profile Dropdown Styles */
.profile-dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    background-color: white;
    min-width: 160px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    z-index: 1001;
    border-radius: 4px;
    margin-top: 8px;
}

.dropdown-content a {
    color: #000;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    font-size: 14px;
    transition: background-color 0.2s;
}

.dropdown-content a:hover {
    background-color: #f5f5f5;
}

.dropdown-content.show {
    display: block;
}
</style>

<!-- Add Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<!-- Search Modal -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-body">
                <form action="/search" method="GET">
                    <div class="input-group">
                        <input type="search" class="form-control" name="q" placeholder="Search products..." aria-label="Search">
                        <button class="btn btn-outline-dark" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const dropdownToggle = document.getElementById('profileDropdownToggle');
    const dropdown = document.getElementById('profileDropdown');

    // Toggle dropdown on click
    dropdownToggle.addEventListener('click', function(e) {
        e.preventDefault();
        dropdown.classList.toggle('show');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!dropdownToggle.contains(e.target) && !dropdown.contains(e.target)) {
            dropdown.classList.remove('show');
        }
    });

    // Handle logout
    document.getElementById('logoutLink')?.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include'
        })
        .then(response => {
            if (response.ok) {
                // Clear any client-side storage
                localStorage.clear();
                sessionStorage.clear();
                
                // Force a hard redirect to login page
                window.location.replace('/login');
            }
        })
        .catch(error => {
            console.error('Logout error:', error);
        });
    });
});
</script> 